import numpy as np
import pandas as pd
from sklearn.feature_extraction.text import TfidfVectorizer
from sklearn.metrics.pairwise import cosine_similarity

# 1. Создаем список книг и их описания
books = {
    'Название книги': [
        'Java для чайников. 7-е изд.', 
        'Программируем на Python | Доусон Майкл', 
        'Python, Django и Bootstrap для начинающих. | Постолит Анатолий В.', 
        'Oracle для профессионалов. Архитектура, методики программирования и основные особенности версий 9i, 10g, 11g и 12c | Кайт Томас, Дарл Кун', 
        'Язык программирования C. Лекции и упражнения | Прата Стивен', 
        'Структуры данных и алгоритмы в Java | Лафоре Роберт', 
        'Философия Java. 4-е полное изд. | Эккель Брюс', 
        'Python для детей. Самоучитель по программированию | Бриггс Джейсон', 
        'Изучаем основы Python. Практический курс для дата-аналитиков. (Ай Пи Ар Медиа)', 
        'Data Science. Наука о данных с нуля Грас Джоэл Грас Джоэл | Грас Джоэл'
    ],
    'Описание': [
        'Перед вами бестселлер для начинающих, посвященный Java 9 — новой версии самого мощного объектно-ориентированного языка программирования. Программа, написанная на Java, будет выполняться практически на любом компьютере, ноутбуке или портативном устройстве. Освоив Java, вы сможете создавать мультимедийные приложения, предназначенные для любой платформы. Независимо от того, на каком языке вы программировали раньше (и даже если вы никогда прежде не программировали), вы быстро научитесь создавать современные кроссплатформенные приложения, используя возможности Java 9.',
        'Эта книга — идеальное пособие для начинающих изучать Python. Руководство, написанное опытным разработчиком и преподавателем, научит фундаментальным принципам программирования на примере создания простых игр. Вы приобретете необходимые навыки для разработки приложений на Python и узнаете, как их применять в реальной практике. Для лучшего усвоения материала в книге приведено множество примеров программного кода. В конце каждой главы вы найдете проект полноценной игры, иллюстрирующий ключевые идеи изложенной темы, а также краткое резюме пройденного материала и задачи для самопроверки. Прочитав эту книгу, вы всесторонне ознакомитесь с языком Python, усвоите базовые принципы программирования и будете готовы перенести их на почву других языков, за изучение которых возьметесь.',
        'Книга посвящена вопросам разработки веб-приложений с использованием языка Python, фреймворков Django, Bootstrap и интерактивной среды разработки PyCharm. Рассмотрены основные технологии и рабочие инструменты создания веб-приложений. Описаны фреймворки Django, Bootsrtap и структура создаваемых веб-приложений. На простых примерах показана обработка и маршрутизация запросов пользователей, формирование ответных веб-страниц. Рассмотрено создание шаблонов веб-страниц и форм для пользователей. Показано взаимодействие пользователей с различными типами баз данных через модели. Описана работа с базами данных через встроенные в Django классы без использования SQL-запросов. Приведен пошаговый пример создания сайта от его проектирования, до формирования программных модулей и развертывания сайта в Интернете с базами данных SQLite и MySQL. Электронный архив на сайте издательства содержит коды всех примеров.',
        'Книга представляет собой универсальный источник глубоких знаний о проектировании, разработке и администрировании приложений Oracle. В третьем издании продолжается исследование применения баз данных Oracle для построения масштабируемых приложений, которые эффективно функционируют и создают корректные результаты. Том Кайт и Дарл Кун придерживаются простой философии: вы можете трактовать базу данных Oracle как черный ящик и только помещать туда данные или же вы можете полностью разобраться в ее работе и эксплуатировать как мощную вычислительную среду. Выбрав второй подход, вы обнаружите, что остается совсем немного задач по управлению информацией, которые невозможно решить быстро и элегантно.В полностью пересмотренном третьем издании раскрываются особенности разработки приложений вплоть до версии Oracle 12c. Большая часть нового материала посвящена появившемуся набору облачных средств Oracle и применению подключаемых баз данных. Каждое новое средство объясняется в манере, подкрепляемой примерами, с обсуждением не только того, как оно работает, но также способа реализации программного обеспечения с его использованием и связанных с ним распространенных заблуждений./. Не воспринимайте базу данных Oracle как черный ящик! Возьмите эту книгу. Загляните за кулисы. Ускорьте свой карьерный рост!. Полностью пересмотренный материал для охвата версии Oracle 12c. Подход, основанный на реальных примерах: позвольте фактам стать вашим проводником. Глубокий анализ наиболее мощных средств Oracle. В книге рассматриваются следующие темы. Разработка подхода к решению задач на основе фактов. Управление транзакциями в средах с высокой степенью параллелизма. Ускорение доступа к данным благодаря эффективному проектированию таблиц и индексов. Управление файлами и структурами памяти, позволяющее достичь высокой производительности и надежности. Улучшение масштабирования с помощью секционирования и параллельной обработки. Загрузка и выгрузка данных для взаимодействия с внешними системами. Для кого предназначена эта книга. Эта книга предназначена для администраторов баз данных Oracle, разработчиков на PL/SQL и Java, которые пишут код, развертываемый внутри базы данных, и разработчиков внешних приложений, использующих базы данных Oracle в качестве хранилища. Книга ориентирована на тех, кто стремится создавать эффективные и масштабируемые приложения.',
        'Эта книга представляет собой тщательно проверенное, хорошо продуманное и всеобъемлющее учебное пособие, предназначенное для программистов и разработчиков. Ставшая классикой, она обучает принципам программирования, в том числе структуризации кода и нисходящему проектированию. Автор и преподаватель Стивен Прата создал поучительное, ясное и проницательное введение в С. Наряду с деталями языка С объясняются фундаментальные концепции программирования. Многочисленные короткие практические примеры иллюстрируют только одну или две концепции за раз и поощряют читателей проработать новые темы, непосредственно приступив к их реальному использованию. Вопросы для самоконтроля и упражнения по программированию, приводимые в конце каждой главы, ориентированы на критически важные сведения и помогают читателям понять и систематизировать наиболее сложные концепции. Будучи дружественным и простым в чтении руководством, ориентированным на самостоятельное освоение, книга подойдет как студентам, изучающим программирование, так и разработчикам, которые специализируются на других языках и желают лучше понять основы этого базового языка. Шестое издание этой книги было обновлено и расширено с целью охвата последних наработок в языке С, а также раскрытия подробностей нового стандарта СИ. Здесь вы найдете углубленные, широкие и разнообразные подходы и инструменты, совершенствующие процесс изучения.',
        'Второе издание одной из самых авторитетных книг по программированию посвящено использованию структур данных и алгоритмов. Алгоритмы — это основа программирования, определяющая, каким образом разрабатываемое программное обеспечение будет использовать структуры данных. На четких и простых программных примерах автор объясняет эту сложную тему, предлагая читателям написать собственные программы и на практике освоить полученные знания. Рассматриваемые примеры написаны на языке Java, хотя для усвоения материала читателю не обязательно хорошо знать его — достаточно владеть любым языком программирования, например C++.  Первая часть книги представляет собой введение в алгоритмизацию и структуры данных, а также содержит изложение основ объектно-ориентированного программирования. Следующие части посвящены различным алгоритмам и структурам данных, рассматриваемым от простого к сложному: сортировка, абстрактные типы данных, связанные списки, рекурсия, древовидные структуры данных, хеширование, пирамиды, графы. Приводятся рекомендации по использованию алгоритмов и выбору той или иной структуры данных в зависимости от поставленной задачи.',
        'Впервые читатель может познакомиться с полной версией этого классического труда, который ранее на русском языке печатался в сокращении. Книга, выдержавшая в оригинале не одно переиздание, за глубокое и поистине философское изложение тонкостей языка Java считается одним из лучших пособий для программистов. Чтобы по-настоящему понять язык Java, необходимо рассматривать его не просто как набор неких команд и операторов, а понять его «философию», подход к решению задач, в сравнении с таковыми в других языках программирования. На этих страницах автор рассказывает об основных проблемах написания кода: в чем их природа и какой подход использует Java в их разрешении. Поэтому обсуждаемые в каждой главе черты языка неразрывно связаны с тем, как они используются для решения определенных задач.',
        'Эта книга — самоучитель по одному из самых востребованных на сегодняшний день языков программирования — Python. Начиная с самых простых действий, шаг за шагом вы будете писать свои программы и постигать тонкости этого языка. Свои знания вы сможете проверить сразу же — на забавных примерах и уморительно смешных заданиях, справиться с которыми помогут прожорливые монстры, секретные агенты и воришки-вороны.Вы узнаете как:использовать основные элементы Python — списки, функции, модули;рисовать при помощи встроенных инструментов Python;анимировать изображения с tkinter;написать настоящие игры — Прыг-скок! (клон знаменитой игры Pong) и бродилку "Человечек ищет выход", где нужно прыгать по платформам, чтобы добраться до выхода. О языке Python Язык программирования Python — это мощный инструмент для создания программ самого разнообразного назначения, доступный даже для новичков. С его помощью можно решать задачи различных типов. На сегодняшний день на этом языке пишутся программы для банков, телекоммуникационных компаний, многие аналитики работают с данными с помощью именно этого языка. Благодаря понятному и определенному синтаксису на нем очень легко начать программировать.Python-код легко читается, а интерактивная оболочка позволяет вводить программы и сразу же получать результат. Помимо простой структуры языка и интерактивной оболочки, в Python есть инструменты, заметно ускоряющие обучение и позволяющие создавать несложные анимации для своих видеоигр. Один из таких инструментов — специально созданный для обучения модуль turtle, который имитирует "черепашью графику" (в 1960-х годах она использовалась в языке Logo). Другой инструмент — модуль tkinter для работы с графической библиотекой Tk, позволяющей создавать программы с продвинутой графикой и анимацией Фишки книги: В конце книги есть глоссарий и список самых важных слов из языка программирования. Изучая книгу, вы повеселитесь, создадите забавные игры и персонажей. Книга включает в себя все основные функции и блоки, которые необходимо знать юному программисту. В конце книги вы найдете материал, что делать дальше, что изучать и как развиваться. Для кого эта книга: Для детей от 10 лет и взрослых, которые хотят научится программировать на языке Python.',
        'Издание представляет собой практический курс, состоящий из 13 разделов (12 из которых интерактивные — для среды JupyterLab). Курс содержит введение в основы языка Python с дальнейшим упором на аналитику данных (работа с наборами данных, статистика, язык SQL, метрики и машинное обучение). Формат материала прост для понимания, а каждый новый раздел включает в себя набор необходимых файлов, ссылок и практических заданий. Предназначено для широкого круга читателей, интересующихся вопросами программирования и аналитики данных на Python. Благодаря рассмотрению основ языка Python потенциальной аудиторией курса могут являться обучающиеся, ранее не изучавшие программирование.',
        'Книга позволяет изучить науку о данных (Data Science) и применить полученные знания на практике. Она содержит краткий курс языка Python, элементы линейной алгебры, статистики, теории вероятностей, методов обработки данных. Приведены основы машинного обучения. Описаны алгоритмы k ближайших соседей, наивной байесовой классификации, линейной и логистической регрессии, а также модели на основе деревьев принятия решений, нейронных сетей и кластеризации. Рассмотрены приемы обработки естественного языка, методы анализа социальных сетей, основы баз данных, SQL и MapReduce. Во втором издании примеры переписаны на Python 3.6, игрушечные наборы данных заменены на «реальные», добавлены материалы по глубокому обучению и этике данных, статистике и обработке естественного языка, рекуррентным нейронным сетям, векторным вложениям слов и разложению матриц.'
    ]
}

# Преобразуем в DataFrame
df_books = pd.DataFrame(books)

# 2. Преобразуем текст в числовые вектора с использованием TF-IDF
tfidf = TfidfVectorizer(stop_words='english')
tfidf_matrix = tfidf.fit_transform(df_books['Описание'])

# 3. Рассчитаем косинусное сходство между книгами
cosine_sim = cosine_similarity(tfidf_matrix, tfidf_matrix)

# 4. Функция для получения рекомендаций
def recommend_books(book_title, cosine_sim=cosine_sim):
    # Найдем индекс книги, соответствующей названию
    idx = df_books[df_books['Название книги'] == book_title].index[0]
    
    # Получим список всех коэффициентов схожести для данной книги
    sim_scores = list(enumerate(cosine_sim[idx]))
    
    # Отсортируем книги по коэффициенту схожести
    sim_scores = sorted(sim_scores, key=lambda x: x[1], reverse=True)
    
    # Получим индексы самых похожих книг (пропускаем первую книгу - это сама книга)
    sim_scores = sim_scores[1:6]
    
    # Вернем названия книг
    book_indices = [i[0] for i in sim_scores]
    return df_books['Название книги'].iloc[book_indices]

# Пример использования: рекомендуем книги, если пользователь купил 'Python для начинающих'
print("Рекомендации для книги 'Data Science. Наука о данных с нуля Грас Джоэл Грас Джоэл | Грас Джоэл':")
print(recommend_books('Data Science. Наука о данных с нуля Грас Джоэл Грас Джоэл | Грас Джоэл'))